### 2017_1C_3 core training
编写 GCJ 的题目太难了, 所以我们使用一个 AI 来帮忙想题目. 
我们给他 N 个不同核心, 每个核心有不同的个性. 
但就像真人一样, 每个核心可能会分神, 崩溃, 或者拒绝工作. 
只要 K 个核心正常工作, AI 就能正常工作. 
我们可以训练核心, 来让他靠谱一点. 我们有 U 个训练单元. 
在第 i 个核心上使用 X 个训练单元会增加 X 的成功概率. 
如果我们优化训练单元的分配方案, 来增加 AI 正常工作的概率, 
AI 正常工作的最大概率是多少?

#### 2017_1C_3 思路
小数据集: 每个核心都要正常工作. 
把训练单元都用来补概率短板.

大数据集: K 个核心正常工作就可以 
我们的策略是, 把训练单元都给其中一组核心, 其他的不管. 
把所有核心的成功概率按从低到高排序, 从第 i 个开始加训练单元. 
和小数据集的方法一样, 补短板. 如果还有剩, 就补第 i-1 个. 
我们可以试所有的 i, 然后找概率最高的那个.

首先, 我们看看补 i 还是 i+1 比较好. 
记 Ai 和 Bi 为 N 个核心中, 除了核心 i 和核心 i+1, 正好有 K-2 和 K-1 个核心有效的概率. 
记 P(i, d) 为第 i 个核心的成功概率提高到 Pi + d 时, 有至少 K 个核心正常工作的概率. 
结论: P(i, d) - P(i+1, d) = (Ai - Bi) * (Pi+1 - Pi) * d. 
因为 Pi+1 - Pi 是正数, 所以当且仅当 Bi > Ai 的时候, 提高 i + 1 的概率要好过提高 i 的概率.

要证明, 存在一个 i0, 当且仅当 i >= i0 的时候, Bi > Ai. i0 就是我们要开始提高的核心. 
注意到, Ai 由 N-2 个概率决定, Ai+1 由另外一组 N-2 个概率决定, 但他们中有 N-3 个核心是重复的. 
假定这 N-3 个核心概率固定. 
记 A(p) 为 N-3 个核心, 加上另一个概率是 p 的核心, 中正好有 K-2 个成功的概率. 
B(p) 为正好有 K-1 个成功的概率.

我们会证明, B(p+d) - A(p+d) > B(p) - A(p). 
记 U, V, W 分别为概率固定的 N-3 个核心中, 正好有 K-3, K-2, K-1 个成功的概率. 
A(p) = U * p + V * (1-p) 
B(p) = V * p + W * (1-p) 
B(p) - A(p) = (V-U) * p + (W-V) * (1-p) 是个关于 p 的线性方程. 
p = 0 时, B(p) - A(p) = W - V 
p = 1 时, B(p) - A(p) = V - U 
要让它从正变成负, 必须使 W - V > 0, V - U < 0, 这意味着 V 是一个极小值. 
但是从独立实验的成功概率来看, 这是不可能的.

### 2017_1C_2 parenting partnering
Cameron 和 Jamie 是生活伴侣, 最近他们当父母啦! 
他们决定每人每天看管婴儿 12 小时(720 分钟). 
Cameron 和 Jamie 各自有活动, Cameron 有 Ac 个, Jamie 有 Aj 个. 相互时间不重叠. 
所以一个人有活动的时候就由另一个看孩子. 
给出 Cameron 和 Jamie 的活动清单, 他们每天至少要交接多少次?

#### 2017_1C_2 思路
就算两个人都没有活动, 每天也有 2 次交接, 如中午12点, 晚上12点. 
跨天的情况, 没有跨天的活动, 但有跨天的间隙. 
对于每个间隙, 可以有几种情况: J , C , JC , CJ. 
JCJ 的情况没有意义, 因为它总是可以合并成交接一次. 
间隙中间不交接的情况可以有: J/J/J, J/J/C, C/J/C. 次数 0, 1, 2. 
间隙中间有交接的情况可以有: J/JC/C, J/JC/J. 次数 1, 2. 
注意到前后家长不同的情况总是需要 1 次交接. 
前后家长相同的情况, 可能需要 0 或 2 次交接. 
任务是尽量避免 2 次交接的情况发生. 
将任务按照时间长短从短到长排序, 先填短的, 超过 720 不得不交换. 
pitfall: 
一开始以为没有活动应该是一次交换, 走了弯路. 
注意新事件的开始踩到别人事件的结束, 和新事件的结束踩到别人事件的开始的情况. 
跨天的情况, 应该补到事件登记里一起处理. 
注意第一个事件从 0 开始, 最后一个事件在 1440 结束的情况, 也会踩到别人的事件.

### 2017_1C_1 ample syrup
无限馅饼屋的厨房刚接到一笔 K 个馅饼的新订单啦! 
主厨现有 N 个馅饼, N >= K. 每个馅饼是个圆柱形, 半径高度不同. 
你要从 N 个馅饼中选出 K 个叠起来, 半径小的在上, 大的在下. 
你知道顾客喜欢的只有一样: 糖浆! 暴露在外的部分可以浇上糖浆. 
如果你认真选择这 K 个馅饼, 可以浇上糖浆的最大面积是多少?

#### 2017_1C_1 思路
1. 对于任何一个馅饼, 尝试用它做底, 然后选取 K-1 个半径不大于它, 且侧面积最大的其他馅饼.
2. 选择侧面积最大的 K-1 个馅饼. 
   如果底在这 K-1 个之中, 则再往下选择一个侧面积最大, 半径 <= K-1 个的最大半径的馅饼. 
   如果底不在这 K-1 个之中, 再选择一个半径 > K-1 个的最大半径, 侧面积 + 顶面积最大的馅饼. 
   从这两个方案中选择一个面积最大的.

### 2017_1B_3 pony express
这是1860年，Pony Express 是加入美国东海岸和西海岸的最快的邮件递送系统。
该系统服务于N个不同的城市。在每个城市，都有一匹马; 
每匹马以一定的恒定速度行进，并且在它变得太累而不能继续之前具有它可以行进的最大总距离。
小马快车骑手从首发城市的马开始。每次骑车者到达城市时，他们可以继续使用他们现有的马或切换到该城市的马; 
切换是瞬时的。马从来没有机会休息，所以当马跑完最大距离，它就再也跑不动了！
当骑车者到达目的地城市时，邮件将被传递。
城市之间的路线是通过公司所有者，立法者，工会代表和堂兄皮特之间复杂的谈判建立起来的。
这意味着城市之间的距离不一定遵循常识：
例如，它们不一定符合三角不等式，从城市A到城市B的距离可能与城市B到城市A的距离不同！
你是一个旅行的企业家，你从未来带来了一台快速的计算机。
它不足以让您设置电子邮件服务并使Pony Express过时，但可以用它来为Pony Express制定最佳路由计划。
根据城市与每个城市的马匹之间的路线的所有数据，以及一对开始和结束城市的列表，
您能否快速计算每次交付所需的最短时间？

#### 2017_1B_3 思路
小数据集: 城市之间是一条线, 我们要从第一个城市送信到最后一个.
使用动态规划. 
定义 f(i) 为从城市 i 到最后一个城市最快的方法. 
假设我们开始使用 city i 的马. 显然答案是 f(1). 
但是我们不知道从哪里应该换马, 所以我们有以下规则: 
f(N) = 0; 
f(i) = min { D(i, j) / S(i) + f(j) }; 
其中, j 是在城市 i 的马能跑到的距离范围内的城市.

大数据集: 城市之间是一个图, 要算出给出的城市对之间的最佳方案. 
我们知道, 我们要求解的权重(时间)和图中的权重(距离)不同, 
并且没有办法直接转换. 所以我们需要创建一张新的图, 以时间为权重. 
我们定义一个图 G'. G' 的结点和 G 是相同的, 只是边 (i, j) 之间的权重是从城市 i 到城市 j 的时间. 
我们说过全程的速度不是恒定的, 但是我们可以让他恒定. 
边 (i, j) 可以代表骑同一匹马从城市 i 到城市 j 的时间, 而这匹马就应该是城市 i 的马 h. 
这样的话, 边 (i, j) 代表一条 G 中的通路, 用同一匹马来跑. 
这意味着, 边 (i, j) 存在的条件是, i 和 j 之间有没有一条通路, 距离在 h 能跑到的最大距离之内. 
所以边 (i, j) 的权重就是最短距离除以 h 的速度. 
剩下的问题就是, 找到 (i, j) 之间的最短距离, Floyd-Warshall 方法是最简单也是最快的解法. 
总结一下, 我们解决问题的顺序是: 
1. 用 Floyd-Warshall 方法找到 G 的节点之间的最短距离. 
2. 创建 G', 看边 (i, j) 之间的距离是不是能够跑到, 将权重设为时间. 
3. 用 Floyd-Warshall 方法找到节点对之间的最短时间. 
4. 直接从上一步的结果中读出答案.


### 2017_1B_2 stable neibors
你很幸运拥有N只宠物独角兽。每只独角兽的鬃毛中都有一种或两种以下的毛发：红色毛发，黄色毛发和蓝色毛发。
鬃毛的颜色取决于它包含哪种颜色的毛发：
只有一种颜色的毛发的鬃毛就是那种颜色。例如，只有蓝色毛发的鬃毛是蓝色的。
红色和黄色毛发的鬃毛呈橙色。
黄色和蓝色头发的鬃毛呈绿色。
有红色和蓝色头发的鬃毛呈紫罗兰色。
你有 R，O，Y，G，B，V 只独角兽分别有红色，橙色，黄色，绿色，蓝色和紫色鬃毛。
你刚刚建造了一个带有 N 个档位的圆形马厩，这些马厩安排在一个环中，每个摊位与其他两个摊位相邻。
您想在这些摊位中准确地放置一只独角兽。
然而，独角兽需要感觉稀有和特殊，所以没有独角兽可以在另一只独角兽的旁边，它的鬃毛中至少有一种发色。
例如，带有橙色鬃毛的独角兽不能与具有紫色鬃毛的独角兽相邻，因为这两个鬃毛都有红色毛发。
同样，带有绿色鬃毛的独角兽也不能靠近带有黄色鬃毛的独角兽，因为它们都有黄色毛发。
是否可以放置所有的独角兽？如果是，请提供任何一种安排。

#### 2017_1B_2 思路
小数据集: 只有纯色毛发的独角兽
如果某个颜色的数量大于 N / 2, 那问题无解.
否则我们可以按照数量大小排序, 先用数量多的, 填充 1, 3, 5..., 直到填满, 再填充 2, 4, 6...

大数据集: 有混色毛发的独角兽
混色毛发独角兽只能和另一纯色的独角兽做邻居, 所以对于任意混色毛发, 我们可以找到一个链条.
比如, R-G-R-G-R. 然后这个结点可以当作一个结点 R. 问题又回到小数据集.


### 2017_1B_1 steed 2: cruise control
安妮是一名压力很大的公交车司机。
她试图在加勒比海游轮上放松身心，但事实证明这也很紧张，因此她最近开始骑马。
今天，安妮正沿着一条从西向东延伸的狭长单行道向东骑马。
她目前在公路 0 公里处，目的地是公里D;
还有N匹马在同一条路上同向行驶; 所有马都会继续旅行，而且他们都在安妮的马和目的地之间。
这些马的第 i 个最初位于公里 Ki，并且以每小时 Si 公里的最大速度行驶。
马非常有礼貌，马H1不会超过另一匹马H2.
马（除了安妮的）以最高速度行驶，如果马 H1 赶上另一匹马较慢的马 H2，H1 降低其速度以匹配 H2 的速度。
另一方面，安妮的马没有最大的速度，只要它没有超过另一匹马就可以以安妮选择的任何速度行进。
为了确保她和她的马顺利骑行，安妮希望为她的整个行程选择一个恒定的“巡航控制”速度，
从她当前的位置到目的地，这样她的马就不会通过任何其他马。她可以选择的最高速度是多少?

#### 2017_1B_1 思路
找出在他前面的所有的马到达的最长时间.


### 2017_1A_3 play the dragon
你是一只善良的龙, 要保护你的巢穴免受贪婪骑士的攻击!
你有 Hd 生命值, Ad 攻击力, 骑士有 Hk 生命值, Ak 攻击力.
如果你的生命值降到 0, 或者骑士的生命值降到 0, 游戏结束.
游戏将进行几个回合. 每个回合你先行, 你能做以下 1 个操作:
攻击: 减少对手的生命值
Buff: 你的攻击力增加 B
治疗: 你的生命值变成 Hd
Debuff: 你的对手攻击力减少 D
如果骑士的生命值 > 0, 他会攻击, 回合结束.
你至少需要多少回合击败骑士? 或者不可能击败骑士?

#### 2017_1A_3 思路
小数据集: 
1. 只有在不得已的情况下才使用治疗. 
2. 所有的 buff 都应该放在攻击之前. 
3. buff 的数量直接影响攻击的数量. 
4. debuff 应该放在所有的 buff 和攻击之前. 
5. 如果在攻击或 debuff 之后, 骑士仍然能一回合击败你, 无解. 
6. 如果你必须连续 2 回合进行治疗, 你必须一直治疗, 无解. 
所以策略是这样的, 用 D' 回合 debuff, B' 回合 buff, A' 回合攻击, 然后不得已的时候进行治疗. 
因为 B' 决定 A', 我们只需要决定 D' 和 B'. 
因为生命值不会超过 100, 所以攻击力超过 100 没有意义, 所以我们不会做超过 100 的 buff 或者 debuff. 
并且最糟糕的情况不会超过 200 回合, 我们可以设置一个很小的上限, 总之小数据集直接模拟就够了.

大数据集:
注意到, buff + attack 和 debuff + cure 是独立的.
我们可以先找到 buff + attack 的回合数.
至于 debuff 的次数, 我们不需要考虑所有数值, 比如说, 生命值是 100, 攻击力是 50. 
攻击力减少到 34 都是没有用的, 龙都必须每隔一回合治疗一次. 找到这些攻击力的门槛值, 其他就不考虑了.
当我们有了这些门槛值, 我们都不用每个独立地模拟.
假如我们已经进行了 T 回合, 做如下操作:
1. 假如我们不再 debuff 了. 我们还需要多少回合 buff + attack, 外加保命, 比较总的回合数. 
2. 算出我们到下一个门槛值还需要进行多少次 debuff, 外加保命. 把这个数值加到 T.
在两个门槛值之间, 我们可以算出 debuff 的次数和治疗的次数, 也可以算出 buff + attack 阶段需要治疗的次数. 
这样就能找到一个 debuff 和 cure 回合数的平衡.

### 2017_1A_2 Ratatouille
你已经找到了法国名菜罗勒香蒜浓汤的终极秘方!
你知道应该用什么原料, 每种原料用多少.
你想向全世界分享这道菜的秘方...然后顺便赚点钱!
你已经订了一些原料包. 每包是一种原料. 原料包的重量不同.
方便起见, 每种原料你订了相同数量的原料包.
你想用这些原料包组成多个原料组合卖给顾客.
每个原料组合, 每种原料, 只有 1 包, 并且标着能做几份.
因为你不想欠顾客的, 也不想浪费食物, 每包原料必须包含 90% - 110 % 所需的原料.
你想搭配出尽可能多的可用原料组合. 最多能做多少个?

#### 2017_1A_2 思路:
包装的克数不重要, 能做几份才重要. 每个包装能做一个范围的份数.

小数据集:
最多只有 2 种原料. 如果只有 1 种, 解决方法就是, 范围非空的可以形成工具包, 空的不行.
如果有 2 种原料, 他们必须配对. 我们可以使用二分图匹配法. 但是小数据集只有 8 包, 可以暴力法试.

大数据集:
尽量做份数比较小的. 只要我们有选择, 就选择范围上限最低的. 
证明: 
如果 l1 和 l2 是相同原料的两个范围, 并且 l2 包含 l1. 
l1 和 l2 要么上限相同, 要么下限相同. 那不难证明, 如果 li 是原料包 Si 的范围, 
如果 S1 <= S2, 那么 l1 的下限一定小于等于 l2 的下限. 
相反, 如果 S1 > S2, 那么 l1 的上限一定大于等于 l2 的上限. 
性质 1: 当我们选择丢弃一个范围的时候, 就是这个范围没办法组成可用原料包的时候. 
性质 2: 当我们选择一组范围组成一个原料包, 且 M 是所有这些范围的交集的最小值, 
那别的范围就没办法组成比 M 小的倍数的原料包了.

### 2017_1A_1 Alphabet cake
你正在为一些孩子举行 party.
你为他们准备的蛋糕是 R x C 格的. 你的助手将每个孩子名字的首字母写在一块蛋糕上.
每个孩子都想要一个四方形的蛋糕, 只含自己的首字母, 不含其他孩子的首字母. 
你能想办法将每个空白的蛋糕都分出去吗?

#### 2017_1A_1 思路
小数据集:
1. 暴力法. 对所有格子, 枚举所有可能的值. 然后对于所有的字母, 找到左上和右下点, 检查方块里是否都是它.
2. 暴力法. 方形扩展. 从一个字母开始, 在它的周围绘制只包含 ? 的边框.

大数据集:
1. 分治法. 把蛋糕切一刀, 分别解决问题.
2. 贪心法. 向右找到边界, 向左找到边界, 填充这个字母. 对于空行, 复制上面一行.
