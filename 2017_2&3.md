### 2017_3_4 slate modern
著名的 slate modern 画廊专注于最新的艺术风尚: 严格的灰度创作.
画廊的所有画作必须是 R * C 的网格.
每个网格填充一个正整数的亮度值. 相邻网格的亮度值之差不能超过 D.
你的画家朋友 cody-jamal 正在为画廊创作一幅画. 昨晚他在画布上填充了 N 个网格.
你刚刚告诉他画廊的规则. 现在他想知道是不是有办法填充所有剩余网格而不破坏规则.
如果有可能, 他想让亮度值之和尽量大, 以节约黑色颜料. 输出模除 10^9 + 7.

#### 2017_3_4 思路
将问题转换为图. 
每个格子是一个结点, 外加一个 root 结点.
相邻的结点连一条边, 长度为 D. 根结点和值固定为 v 的网格连一条边, 长度 v.
性质1: 记 p(c) 为从根结点到网格 c 的最短路径. p(c) 是网格 c 亮度值的上限.
性质2: 如果 c 的亮度值固定为 v, 而 p(c) != v, 则无解.
性质3: 所有固定亮度的网格 c, 如果 p(c) == v, 则有解. 不固定网格的值为 p(c).

小数据集:
Dijkstra 算法算出每个格子的最短路径.
检查每个固定亮度的格子, 看是否有解.
如果有解, 答案即是所有 p(c) 的和.


### 2017_3_3 mountain tour
你在珠穆朗玛峰上!
你想游览所有的路线但不想一个人走, 所以需要跟向导在约定的时间一起出发.
山上总共有 C 个营地, 2 x C 个单程徒步旅行团, 每个团从一个营地走到另一个营地.
珠穆朗玛峰上人烟稀少, 一个营地只有 2 个旅行团出发, 也只有 2 个旅行团到达.
每个团每天出发. 团 1 和团 2 从营地 1 出发, 团 3 和团 4 从营地 2 出发, 类推.
第 i 个团的目的地是营地 Ei, 在 Li 时出发, 历时 Di 小时. 
现在是 0 时. 一天从 0 时到 23 时.
你在营地 1, 想参加每个团 1 次, 并且最后回到营地 1.
可以在任何营地等候任何时间. 但只能在发团的时候离开营地.
我们确定安排一个达到要求的行程是可行的. 但行程所需的最短时间是多少?

#### 2017_3_3 思路
小数据集:
每个团只能参加 1 次, 到达营地的团后面必须安排营地出发的团.
每个营地有 2 个到达团和 2 个出发团, 所以只有 2 种方法将到达团和出发团配对.
所以我们可以枚举所有可能的解决方案. 总耗时是所有旅行的时长和等待的时长.
评估一个可能方案的时候, 必须检查是不是每个团都在你的路径之中, 因为可能有环.
因为出发团的等待时间特殊, 出发团的等待时间另外计算. 你可以为此运行 4 次程序. 
时间复杂度为 O(2^C).

另一个角度是, 把这个问题看成是旅行商问题的一个特例.
将每个团当作一个结点, 团之间的配对当作边, 每一团 4 条边. 权重即等待时间.
同样的, 出发团特殊处理, 可以也运行 4 次.


### 2017_3_2 good news and bad news
你找到了 F 个朋友分享新闻. 你了解你的朋友们, 知道谁会跟谁说话.
这样的单向关系有 P 组, 每一组是一个有序对 (Ai, Bi).
对于*每一个*这样的有序对, 你想让 Ai 向 Bi 分享新闻. 新闻由一个整数表示.
新闻的重要程度由绝对值表示, 好消息还是坏消息由符号表示, 没有 0.
并且绝对值不能大于 F^2.
你想让每个朋友输出的新闻之和和输入的新闻之和相等.
你能找到一组符合条件的新闻吗? 或者不可能呢?

#### 2017_3_2 思路
每个有序对是有向图中的一条有向边, 每个朋友是一个结点.
因为不同连通分量可以分开解决. 所以我们只讨论一个连通图.
注意到如果一条边是一个桥, 即它不出现在任何环中, 那么任务是不可能的.
因为新闻可以是正或负, 我们可以把它看作无向图, 找到边之后再调整符号即可.

小数据集:
最多有 4 个朋友, 即最多有 12 条边. 每条边最多有 2 * F^2 = 32 个值.
所以暴力法可能要检查 32^12 种可能, 这太多了不可行.
但是我们可以试小的数据集. 比如说 {-2, -1, 1, 2, 3}.
事实证明这个组合已经足够暴力法解决小数据集了.

大数据集:
从小数据集我们可以看到, 所有没有桥的图都有解.
方法一:
用 DFS 先建立一个生成树. 将所有不在生成树里的边都赋一个 -K 到 K 的值.
现在每个结点的新闻和都是一个整数.
从叶子到根, 我们遍历所有经过的边, 使用这条边来让每个结点的和为 0.
注意到如果 F-1 个非根结点已经是 0, 那根结点一定也是 0 了.
如果失败了, 我们也可以多试几次.
方法二:
同样地, 用 DFS 找到一棵生成树. 所有的边指向根->叶子方向.
非树边的值为 1, 即他们向下个结点传递好消息. 然后给树中的边设置负值.
按与发现顺序相反的顺序处理结点.
因为每个结点只有一个相邻的未赋值边, 所以给他赋一个能让和为 0 的值即可.


### 2017_3_1 googlements
化学家们用元素周期表, 但在 code jam, 我们用数字粉碎机来研究 googlement.
一个 googlement 是一个用最多 9 位数字来表示的字符串.
长度为 L 的 googlement 只能包含 0-L 之间的数字, 不能全是 0.
任何 googlement 可以在任何时间出现, 但他最终会衰变成另一个 googlement.
对于长度为 L 的 googlement, 数 1 的数量, 记下来, 然后数 2 的数量, 写在后面.
依此类推. 有的 googlement 甚至可以衰变成他自己.
你刚刚发现了一个 googlement G. 他最初可能的状态有多少种呢?

#### 2017_3_1 思路
小数据集: googlement 长度最多为 5, 我们就只讨论长度 5 的情况.
任何长度为 5, 并且由 0-5 组成的字符串都是 googlement. 最多只有 6^5 = 7775.
方法一: 枚举所有可能值, 看它衰变成什么数字, 看所求数字出现在多少衰变链中.
方法二: 给出一个数字, 枚举出所有"祖先". 这个方法难点在于如何产生所有可能祖先.

大数据集:
注意到, 每一位数字相加的和大于 L 的数字, 没有直接祖先.
所以去掉那些数字, L = 9 时, 总数是 (10 + 9 - 1)! / (10! * (9-1)!) = 92377.
用小数据集的解法足够了.
而我们可以很容易计算每个数字的直接祖先的数量.
当一个数字没有办法由其他的, 每位数字相加 <= L 的数字产生时, 加上它的祖先的数量.

### 2017_2_4 
将这座城市从外星入侵者手中解放出来的斗争结束了！人们对爱与和平的回归感到高兴。
城市表示为具有R行和C列的网格。一些是建筑物，有些是街道。
不幸的是，在战争期间，现已失败的入侵者在该市建立了自动安全炮塔。
这些炮塔只在街道上。他们对公民构成威胁，但幸运的是，街上也有一些士兵。
炮塔不会动, 不会阻挡视线和射程。士兵不能走过活动炮塔的格子, 但一旦炮塔被摧毁, 士兵就能通过。
炮塔只能瞄准水平或垂直方向的士兵。士兵进入瞄准区域时炮塔不会射击, 但离开瞄准区域时, 炮塔会射击.
每个士兵可以移动 M 个单元, 每次向水平或垂直方向移动 1 个格子。
每个士兵有一发子弹, 如果炮塔在士兵的水平或垂直视线内, 士兵就可以射击。
如果同一视线内有多个炮塔, 士兵能做到越过前面几个而摧毁远的那个。
给你一张地图, 士兵们最多可以摧毁多少炮塔?

#### 2017_2_4 思路
小数据集: 0 <= R, C <= 30
策略是, 将士兵和炮塔两两配对, 并且指定顺序.
给出一个策略, 我们可以检查这个策略是否可行.
检查这个炮塔是不是在士兵的 BFS 范围之内, 每一步移动检查是不是离开了一个炮塔的视线.

但是, 可能的策略太多了, 最多可能有 10! 个配对和 10! 个排列.
需要用到一些事先计算和动态规划.
比如我们有 S 个士兵和 T 个炮塔. 我们可以事先计算每个士兵, 每个现存炮塔的组合, 和是否能够走得到.
动态规划. 记 f(s, t) 为指定的一组士兵 s 摧毁剩余的一组炮塔 t 的最佳方案. 每个 s 和 t 都可以被表示为二进制字符串, 
而每个士兵能不能摧毁这个炮塔组合中的哪一个已经事先计算好了.

大数据集:
我们还将继续使用 BFS, 来检查炮塔是不是走得到.
建立一个二分图 G. 每个士兵和每个炮塔占其中一个结点.
只要能打到, 士兵和炮塔之间就有一条边.
我们可以说: 当且仅当图 G 中有一个包含 R 个炮塔的匹配时, 摧毁 R 个炮塔是可能的.
证明看不懂...

### 2017_2_3 beaming with joy
Joy即将度假，因此她聘请技术人员安装基于红外激光束的安全系统。
技术人员给了她一张图表，表示她的房子是一个带有R行和C列的单元格网格。此网格中的每个单元格包含以下之一：

/：从单元格的左下角到右上角的双面镜子。
\：从单元格的左上角到右下角的双面镜子。
-：一个光束射击器，将水平光束射入左右网格
|：一个光束射击器，将垂直光束射入上下网格
\#： 一堵墙。房屋四周不一定都有墙
.： 没有; 网格是空的。

光束以直线行进并继续通过空单元格。当光束撞击镜子时，它会从镜子的表面反射90度并继续。
当向右移动的光束照射到/镜子上时，它会从镜子反射并开始向上移动;
向上，向左或向下行进的光束分别向镜头/反弹并向右，向下或向左行进。
当光束撞击墙壁或离开网格边界时，它会停止。
光束穿过其他光束没问题，但光束射到光束射击器，光束射击器将被摧毁！

Joy希望确保房子里的每个空网格都至少有一个光束通过它，并且没有光束射击器被摧毁，因为那只会浪费金钱！
不幸的是，技术人员已经安装了该系统，因此Joy最能做的就是将一些现有的光束射击器旋转90度。

你能找到任何方式让Joy实现她的目标，或者确定它是不可能的吗？请注意，不需要尽量减少光束发射器的转数。

#### 2017_2_3 思路
小数据集: 没有镜子
因为没有镜子, 每个发射器可以经过一组垂直或水平连续的非墙网格.
对于每一行, 我们记录下它的当前状态, 为以下 4 种中的一种:
1. 有进入的光束, 是本行前几列发出的.
2. 它需要光束. 即这一行至少有一个网格没有光束, 但它本可以有.
3. 它没有也得不到光束. 
4. 以上都不是. 这意味着前面的非墙网格都有垂直光束了.

然后我们可以试发射器的所有方向, 来看下一列是否可行. 但是每一行的情况有点不同.
遇到的格子可能有 5 种. 已有光束的空格子, 没有光束的空格子, 垂直发射器, 水平发射器, 墙.

另外, 贪心法也可行:
1. 如果一个发射器会摧毁另一个, 就把它调转头. 如果还不行, 那就是 IMPOSSIBLE.
2. 如果某个网格只能由某个发射器转向某个方向才能到达, 那就固定这个发射器的方向.
3. 然后让所有还没固定的发射器都转水平 or 垂直方向.

第三步的原因是, 到第三步还没有光束的网格, 有两个不同方向的光束发射器都指向它.
